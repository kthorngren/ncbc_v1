<!DOCTYPE html>
<html>
  <head>
    
    <meta name = "viewport" content = "width = device-width, initial-scale = 1.0">
    <title id="page-title">Title</title>
    <!-- Datatables Bootstrap Buttons RowGroup Select -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs-3.3.7/jszip-2.5.0/dt-1.10.18/b-1.5.2/b-html5-1.5.2/b-print-1.5.2/rg-1.0.3/sl-1.2.6/datatables.min.css"/>
    <!-- DataTables Editor -->
    <link rel="stylesheet" type="text/css" href="static/css/editor.bootstrap.min.css">
    <!-- Bootstrap Toggle -->
    <link rel="stylesheet" type="text/css" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css">
    <!-- Select2 -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <!-- Latest compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.min.css">

    <!-- Custom Theme Style -->
    <link rel="stylesheet" type="text/css" href="static/css/custom.min.css">
    
  </head>

  <style>
  

  </style>
  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
        <!-- sidebar -->
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <div class="navbar nav_title" style="border: 0;">
              <a href="index" class="site_title"><i class="fa fa-home"></i> <span id="nav-title"> Finesse Load</span></a>
            </div>
            <div class="clearfix"></div>

          </div>
        </div>
        <!-- sidebar -->


        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
            <nav class="" role="navigation">
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fa fa-bars"></i></a>
              </div>
              <h3 style="text-align:center">SVS Finesse Load</h3>
            </nav>
          </div>
        </div>                
                
        <!-- page content -->
        <div class="right_col" role="main">


          <!-- top tiles -->
          <div id="totals" class="row tile_count">
          </div>
          <!-- /top tiles -->
          
          <div class="clearfix"></div>




        	<!-- col-md-12 -->
            <div class="col-md-12 col-sm-12 col-xs-12">
				<!-- row -->
				<div class="row">

                      <div class="x_content panel-body">

                        <div class="col-md-12 hidden-small">
                          <table id="emails" class="table table-hover table-bordered table-striped" cellpadding="0" width="100%">
                            <thead>
                              <tr>
                                <th>pkid</th>
                                <th>Date</th>
                                <th>To</th>
                                <th>From</th>
                                <th>Subject</th>
                                <th>Snippet</th>
                              </tr>
                            </thead>
                          </table>
                        </div>
                        
                      </div>
                      <!-- /x_content -->  



				</div>
				<!-- /row -->	




			</div>
			<!-- col-md-12 -->
			
        </div>
        <!-- /page content -->

        <!-- footer content -->
        <footer class="right_col_background">
          <div class="pull-right right_col_background">
            SVS Finesse Load
          </div>
          <div class="clearfix right_col_background"></div>
        </footer>
        <!-- /footer content -->

      </div>
    </div>



    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
	<!-- debounce -->
    <script src="static/js/jquery.ba-throttle-debounce.min.js"></script>
    <!-- Datatables Bootstrp Buttons RowGroup Select-->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/v/bs-3.3.7/jszip-2.5.0/dt-1.10.18/b-1.5.2/b-html5-1.5.2/b-print-1.5.2/rg-1.0.3/sl-1.2.6/datatables.min.js"></script>
    <!-- DataTables Editor -->
    <script type="text/javascript" src="static/js/dataTables.editor.min.js"></script>
    <script type="text/javascript" src="static/js/editor.bootstrap.min.js"></script>
    <!-- Select2 -->
    <script type="text/javascript" src="static/js/editor.select2.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
    <!-- Bootstrap Toggle -->
    <script type="text/javascript" src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
      <!-- Latest compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
    <!-- Custom Theme Scripts -->
    <script src="/static/js/custom.min.js"></script>
    <!-- fieldType.toggle -->
    <script src="/static/js/field_type_toggle_plugin.js"></script>


<script>

function uniq(a) {
    return a.sort().filter(function(item, pos, ary) {
        return !pos || item != ary[pos - 1];
    })
}

function drawEmailTable() {
	emails_table = $('#emails').DataTable({
		ajax: 'dt_emails',
		dom: 'Blftirp',
		pageLength: 2000,
		scrollY: true,
	    select: {
    	    style: "multi+shift",
        	selector: "td:first-child"
   		},
		columns: [
	        {
    	        data: null,
        	    defaultContent: "",
            	className: "select-checkbox",
	            orderable: false
    	    },
	        {
	        	data: 'email_date',
	        },
	        {
	        	data: 'msg_to',
	        },
	        {
	        	data: 'msg_from',
	        },
	        {
	        	data: 'subject',
	        },
	        {
	        	data: 'snippet',
	        },
	    ],
	    buttons: [
            {
                text: 'Get Email List',
                action: function ( e, dt, node, config ) {
					
					var orig = emails_table.rows( {selected: true} ).data().pluck('msg_to').toArray();
					
					var data = [];
					
					for (i=0; i<orig.length; i++) {
						data.push(orig[i].replace("'", ''));
					}
					
					data = uniq(data);
					console.log(data);
					
                }
                    
            },

                	
        	    
	    ],

	});

}



$(document).ready(function() {

	drawEmailTable();

});
</script>

</body>
</html>

